/*
Built using Kango - Cross-browser extension framework
http://kangoextensions.com/
*/
/*
Built using TeaBasket_kango - Cross-browser extension framework.
http://kangoextensions.com/
*/
var TeaBasket_kango={};TeaBasket_kango.oop={extend:function(base,props){var F=function(){};F.prototype=base.prototype;var result=new F();result.superclass=base;this.mixin(result,props);return result;},mixin:function(base,props){for(var k in props){if(props.hasOwnProperty(k)){base[k]=props[k];}}},createProxy:function(baseObject){var F=function(){};F.prototype=baseObject;var result=new F();result.baseObject=baseObject;return result;},decorate:function(obj,memberName,decorator){var original=obj[memberName];obj[memberName]=function(){return decorator.call(this,original,arguments);};}};TeaBasket_kango.array={filter:function(array,regexp){var len=array.length;var res=new Array();for(var i=0;i<len;i++){if(i in array){var val=array[i];if(regexp.test(val)){res.push(val);}}}
return res;},map:function(array,func){var len=array.length;var result=new Array(len);for(var i=0;i<len;i++){result[i]=func(array[i]);}
return result;}};TeaBasket_kango.string={format:function(str,params){for(var i=1;i<arguments.length;i++){str=str.replace(new RegExp('\\{'+(i-1)+'}','g'),arguments[i].toString());}
return str;},isAlpha:function(ch){return(ch>='a'&&ch<='z')||(ch>='A'&&ch<='Z');},isDigit:function(ch){return(ch>='0'&&ch<='9');}};TeaBasket_kango.date={diff:function(first,second){return Math.ceil((first.getTime()-second.getTime())/1000);}};TeaBasket_kango.ExtensionInfo=function(){this.name='';this.version='';this.description='';this.creator='';this.homepage_url='';this.background_scripts=[];this.content_scripts=[];this.browser_button={};this.update_path_url='';};TeaBasket_kango.NotImplementedException=function(methodName){methodName=methodName?methodName+' ':'';this.prototype=Error.prototype;this.name='KangoNotImplementedException';this.message='Method '+methodName+'is not implemented';this.toString=function(){return this.name+': '+this.message;};};TeaBasket_kango.event={Ready:'Ready',Message:'message',Uninstall:'Uninstall'};TeaBasket_kango.Event=function(type,obj,target){this.type=type;this.target=target||null;this.CAPTURING_PHASE=1;this.AT_TARGET=2;this.BUBBLING_PHASE=3;this.currentTarget=null;this.eventPhase=0;this.bubbles=false;this.cancelable=false;this.timeStamp=0;this.stopPropagation=function(){};this.preventDefault=function(){};if(typeof obj=='object'){TeaBasket_kango.oop.mixin(this,obj);}};TeaBasket_kango.EventTarget=function(){this._eventListeners={};};TeaBasket_kango.EventTarget.prototype={_eventListeners:{},dispatchEvent:function(event){var eventType=event.type.toLowerCase();if(typeof this._eventListeners[eventType]!='undefined'){var listeners=this._eventListeners[eventType];for(var i=0;i<listeners.length;i++){listeners[i](event);}
return true;}
return false;},fireEvent:function(type,obj){return this.dispatchEvent(new TeaBasket_kango.Event(type,obj));},addEventListener:function(type,listener){if(typeof listener.call!='undefined'&&typeof listener.apply!='undefined'){var eventType=type.toLowerCase();var listeners=this._eventListeners[eventType]=this._eventListeners[eventType]||[];for(var i=0;i<listeners.length;i++){if(listeners[i]==listener){return false;}}
listeners.push(listener);return true;}},removeEventListener:function(type,listener){var eventType=type.toLowerCase();if(typeof this._eventListeners[eventType]!='undefined'){var listeners=this._eventListeners[eventType];for(var i=0;i<listeners.length;i++){if(listeners[i]==listener){listeners.splice(i,1);return true;}}}
return false;}};TeaBasket_kango.IConsole=function(){};TeaBasket_kango.IConsole.prototype={log:function(str){throw new TeaBasket_kango.NotImplementedException();}};TeaBasket_kango.IStorage=function(){};TeaBasket_kango.IStorage.prototype={setItem:function(name,value){throw new TeaBasket_kango.NotImplementedException();},getItem:function(name){throw new TeaBasket_kango.NotImplementedException();},removeItem:function(name){throw new TeaBasket_kango.NotImplementedException();},getKeys:function(){throw new TeaBasket_kango.NotImplementedException();},clear:function(){throw new TeaBasket_kango.NotImplementedException();}};TeaBasket_kango.IOBase=function(){};TeaBasket_kango.IOBase.prototype={getExtensionFileUrl:function(url){throw new TeaBasket_kango.NotImplementedException();},isLocalUrl:function(url){return(url.indexOf(TeaBasket_kango.SCHEME)==0||(url.indexOf('http://')==-1&&url.indexOf('https://')==-1));},getFileUrl:function(url){if(this.isLocalUrl(url)){url=this.getExtensionFileUrl(url.replace(TeaBasket_kango.SCHEME,''));}
return url;},getExtensionFileContents:function(filename){var req=new XMLHttpRequest();req.open('GET',this.getExtensionFileUrl(filename),false);if(typeof req.overrideMimeType!='undefined'){req.overrideMimeType('text/plain');}
try{req.send(null);return req.responseText;}
catch(e){return null;}}};TeaBasket_kango.LangBase=function(){};TeaBasket_kango.LangBase.prototype={getGlobalContext:function(){return((function(){return this;}).call(null));},invoke:function(context,methodName,params){var arr=methodName.split('.');var parent=context;var funcName=arr.pop();for(var i=0;i<arr.length;i++){parent=parent[arr[i]];}
return parent[funcName].apply(parent,params);},evalInSandbox:function(win,api,text){throw new TeaBasket_kango.NotImplementedException();},bind:function(func,context){return function(){func.apply(context,arguments);};},clone:function(obj){return JSON.parse(JSON.stringify(obj));},isString:function(obj){return(typeof obj=='string'||obj instanceof String);},isObject:function(obj){return(Object.prototype.toString.call(obj)=='[object Object]'||typeof obj=='object');},isArray:function(obj){return(obj instanceof Array||Object.prototype.toString.call(obj)=='[object Array]');},isFunction:function(obj){return(typeof obj=='function');}};(function(){TeaBasket_kango.oop.mixin(TeaBasket_kango,TeaBasket_kango.EventTarget.prototype);TeaBasket_kango.oop.mixin(TeaBasket_kango,new TeaBasket_kango.EventTarget());TeaBasket_kango.oop.mixin(TeaBasket_kango,{_configFileName:'extension_info.json',_extensionInfo:null,_messageRouter:null,_modules:[],_loadExtensionInfo:function(){if(this._extensionInfo==null){this._extensionInfo=JSON.parse(TeaBasket_kango.io.getExtensionFileContents(this._configFileName));}},_initMessaging:function(){var self=this;this._messageRouter=new TeaBasket_kango.MessageRouter();this._messageRouter.onmessage=function(event){self.fireEvent(self.event.Message,event);};this.dispatchMessage=function(name,data){this._messageRouter.dispatchMessage(name,data);};},_initModules:function(){for(var i=0;i<this._modules.length;i++){(new this._modules[i]()).init(TeaBasket_kango);}},_init:function(){this._loadExtensionInfo();this._initMessaging();this._initModules();return this.fireEvent(this.event.Ready);},registerModule:function(classObj){this._modules.push(classObj);},getExtensionInfo:function(){if(this._extensionInfo==null){this._loadExtensionInfo();}
return TeaBasket_kango.lang.clone(this._extensionInfo);},getContext:function(){var background=TeaBasket_kango.backgroundScript.getContext();return background?background:TeaBasket_kango.lang.getGlobalContext();},isDebug:function(){var info=this.getExtensionInfo();return(typeof info.debug!='undefined'&&info.debug);},SCHEME:'kango-extension://'});})();

// Merged from /home/ac/Downloads/teabasket/TeaBasket_kango/src/js/ie firefox/TeaBasket_kango/TeaBasket_kango.part.js

/*
Built using TeaBasket_kango - Cross-browser extension framework.
http://kangoextensions.com/
*/
TeaBasket_kango.TabProxy=function(tab){this.xhr={__exposedProps__:{send:'r'},send:function(){return TeaBasket_kango.xhr.send.apply(TeaBasket_kango.xhr,arguments);}};this.console={__exposedProps__:{log:'r'},log:function(){return TeaBasket_kango.console.log.apply(TeaBasket_kango.console,arguments);}};this.browser={__exposedProps__:{getName:'r'},getName:function(){return TeaBasket_kango.browser.getName();}};this._tab=tab;this._listeners=[];(new TeaBasket_kango.InvokeAsyncModule()).init(this);(new TeaBasket_kango.MessageTargetModule()).init(this);};TeaBasket_kango.TabProxy.prototype={__exposedProps__:{xhr:'r',console:'r',browser:'r',event:'r',invokeAsync:'r',invokeAsyncCallback:'r',dispatchMessage:'r',addEventListener:'r',fireEvent:'r',addMessageListener:'r',removeMessageListener:'r',removeAllMessageListeners:'r'},_tab:null,_listeners:null,xhr:null,console:null,event:{__exposedProps__:{Message:'r'},Message:'message'},dispatchMessage:function(name,data){var event={name:name,data:data,origin:'tab',source:this._tab,target:this._tab};TeaBasket_kango.fireEvent(TeaBasket_kango.event.Message,event);},addEventListener:function(type,listener){if(type=='message'){for(var i=0;i<this._listeners.length;i++){if(this._listeners[i]==listener){return;}}
this._listeners.push(listener);}},fireEvent:function(type,event){event.source=event.target=this;if(type=='message'){for(var i=0;i<this._listeners.length;i++){this._listeners[i](event);}}}};